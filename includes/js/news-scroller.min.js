var NewsScroller__animiationTime=2000;var NewsScroller__clickAnimationTime=1000;var NewsScroller__showTime=5000;var NewsScroller__lastAnimationTime=0;var NewsScroller__currentEffect=null;var NewsScroller__nextEffect=null;Event.observe(document,'dom:loaded',NewsScroller__init);function NewsScroller__init(){try{NewsScroller__newsItems=$$('ul.offerScrollContent li');setTimeout('NewsScroller__cycle(+1, NewsScroller__animiationTime, false);',NewsScroller__showTime);}
catch(e){NewsScroller__handleException(e);}}
function NewsScroller__handleException(e){if(typeof console!='undefined')console.log(e);else alert(e.message);}
function NewsScroller__cycle(direction,overideAnimTime,user){var lastTimeDelta=new Date().getTime()-NewsScroller__lastAnimationTime;if(lastTimeDelta<NewsScroller__animiationTime&&!user){console.log('Too early ('+lastTimeDelta+' < '+NewsScroller__animiationTime+')');return;}
NewsScroller__lastAnimationTime=new Date().getTime();try{var localAnimTime=overideAnimTime;var currentItemIndex=null;if(NewsScroller__currentEffect==null){for(var i=0;i<NewsScroller__newsItems.length&&currentItemIndex==null;i++){if(parseInt(NewsScroller__newsItems[i].style.top)==0)currentItemIndex=i;}}
else{for(var i=0;i<NewsScroller__newsItems.length&&currentItemIndex==null;i++){if(NewsScroller__newsItems[i]==NewsScroller__currentEffect.element)currentItemIndex=i;}
NewsScroller__currentEffect.cancel();}
if(currentItemIndex==null){currentItemIndex=0;}
var nextItemIndex=currentItemIndex+direction;if(nextItemIndex>=NewsScroller__newsItems.length)nextItemIndex=0;else if(nextItemIndex<0)nextItemIndex=NewsScroller__newsItems.length-1;if(NewsScroller__nextEffect!=null){NewsScroller__nextEffect.cancel();}
if(NewsScroller__nextEffect!=null&&NewsScroller__nextEffect.element!=NewsScroller__newsItems[nextItemIndex]){NewsScroller__currentEffect=new Effect.Morph(NewsScroller__newsItems[currentItemIndex],{style:{top:"0px"},duration:localAnimTime/1000,afterFinish:NewsScroller__oldFinished});var oldNextItem=NewsScroller__nextEffect.element;var oldNextTarget=direction>0?-($(oldNextItem.parentNode).getHeight()+1):($(oldNextItem.parentNode).getHeight()+1);NewsScroller__nextEffect=new Effect.Morph(oldNextItem,{style:{top:oldNextTarget+"px"},duration:localAnimTime/1000});}
else{if(direction>0){NewsScroller__newsItems[nextItemIndex].style.top=(($(NewsScroller__newsItems[nextItemIndex].parentNode).getHeight()+1)+parseFloat(NewsScroller__newsItems[currentItemIndex].style.top))+"px";var targetPosition=(-($(NewsScroller__newsItems[currentItemIndex].parentNode).getHeight()+1));}
else{NewsScroller__newsItems[nextItemIndex].style.top=((-($(NewsScroller__newsItems[nextItemIndex].parentNode).getHeight()+1))+parseFloat(NewsScroller__newsItems[currentItemIndex].style.top))+"px";var targetPosition=(($(NewsScroller__newsItems[currentItemIndex].parentNode).getHeight()+1));}
NewsScroller__currentEffect=new Effect.Morph(NewsScroller__newsItems[currentItemIndex],{style:{top:targetPosition+"px"},duration:localAnimTime/1000,afterFinish:NewsScroller__oldFinished});NewsScroller__nextEffect=new Effect.Morph(NewsScroller__newsItems[nextItemIndex],{style:{top:"0px"},duration:localAnimTime/1000});}}
catch(e){NewsScroller__handleException(e);}}
function NewsScroller__oldFinished(effect){NewsScroller__currentEffect=null;NewsScroller__nextEffect=null;setTimeout('NewsScroller__cycle(+1, NewsScroller__animiationTime, false);',NewsScroller__showTime);}
function NewsScroller__newsDown(){NewsScroller__cycle(-1,NewsScroller__clickAnimationTime,true);}
function NewsScroller__newsUp(){NewsScroller__cycle(+1,NewsScroller__clickAnimationTime,true);}